<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Lie Detector - Ù…Ø¹ ØµØ§Ø­Ø¨Ùƒ</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    body { background: #111; color: #fff; font-family: 'Cairo', sans-serif; text-align: center; padding: 30px; }
    input, button { padding: 10px; margin: 10px; font-size: 18px; border-radius: 10px; }
    .hidden { display: none; }
  </style>
</head>
<body>

  <h1>ğŸ¯ Lie Detector â€“ Ù…Ø¹ ØµØ§Ø­Ø¨Ùƒ</h1>

  <div id="setup">
    <h3>Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø±ÙˆÙ…</h3>
    <input type="text" id="roomCode" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø±ÙˆÙ…">
    <br>
    <button onclick="createRoom()">Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆÙ…</button>
    <button onclick="joinRoom()">Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø±ÙˆÙ…</button>
  </div>

  <div id="questionPanel" class="hidden">
    <h2>ğŸ“¨ Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„</h2>
    <input type="text" id="question" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„...">
    <br>
    <button onclick="sendQuestion(true)">Ø¯Ù‡ Ø­Ù‚ÙŠÙ‚ÙŠ âœ…</button>
    <button onclick="sendQuestion(false)">Ø¯Ù‡ ÙƒØ°Ø¨ âŒ</button>
  </div>

  <div id="answerPanel" class="hidden">
    <h2>ğŸ¤” Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„</h2>
    <div id="showQuestion"></div>
    <button onclick="answer(true)">ØµØ¯Ù‚</button>
    <button onclick="answer(false)">ÙƒØ°Ø¨</button>
  </div>

  <div id="resultPanel" class="hidden">
    <h2 id="resultText"></h2>
    <button onclick="resetGame()">Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯</button>
  </div>

  <script>
    // Firebase config Ù‡Ù†Ø§ Ø­Ø· Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ:
   const firebaseConfig = {
  apiKey: "AIzaSyB0Aj452H6Gp1ociH4ufHrLiU6Uucb-ysM",
  authDomain: "who-is-the-spy-51308.firebaseapp.com",
  databaseURL: "https://who-is-the-spy-51308-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "who-is-the-spy-51308",
  storageBucket: "who-is-the-spy-51308.firebasestorage.app",
  messagingSenderId: "900253646275",
  appId: "1:900253646275:web:b9f7a3cbb1069a07d2d176",
  measurementId: "G-NWXDDDRPRH"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let room = "";
    let isOwner = false;

    function createRoom() {
      room = document.getElementById("roomCode").value;
      if (!room) return alert("Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Ø§Ù„Ø±ÙˆÙ…");
      isOwner = true;
      db.ref("rooms/" + room).set({}); // create empty room
      document.getElementById("setup").classList.add("hidden");
      document.getElementById("questionPanel").classList.remove("hidden");
    }

    function joinRoom() {
      room = document.getElementById("roomCode").value;
      if (!room) return alert("Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Ø§Ù„Ø±ÙˆÙ…");
      isOwner = false;
      db.ref("rooms/" + room).on("value", snapshot => {
        const data = snapshot.val();
        if (data && data.question) {
          document.getElementById("setup").classList.add("hidden");
          document.getElementById("answerPanel").classList.remove("hidden");
          document.getElementById("showQuestion").innerText = data.question;
        }
      });
    }

    function sendQuestion(isTrue) {
      const question = document.getElementById("question").value;
      if (!question) return alert("Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„");
      db.ref("rooms/" + room).set({
        question: question,
        answer: isTrue
      });
      alert("Ø§Ù„Ø³Ø¤Ø§Ù„ ØªØ¨Ø¹Øª âœ…");
    }

    function answer(userAnswer) {
      db.ref("rooms/" + room).once("value").then(snapshot => {
        const realAnswer = snapshot.val().answer;
        const resultText = document.getElementById("resultText");

        if (userAnswer === realAnswer) {
          resultText.innerText = "ğŸ‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!";
        } else {
          resultText.innerText = "âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!";
        }

        document.getElementById("answerPanel").classList.add("hidden");
        document.getElementById("resultPanel").classList.remove("hidden");
      });
    }

    function resetGame() {
      if (isOwner) {
        document.getElementById("question").value = "";
        document.getElementById("questionPanel").classList.remove("hidden");
      }
      document.getElementById("resultPanel").classList.add("hidden");
    }
  </script>
</body>
</html>
